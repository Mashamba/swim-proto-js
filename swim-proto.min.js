!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.swim||(t.swim={})).proto=e()}}(function(){return function e(t,n,r){function i(o,p){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!p&&a)return a(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";function r(e){switch("string"==typeof e&&(e=w.parse(e)),e.head().key){case"event":return a.decode(e);case"command":return u.decode(e);case"send":return f.decode(e);case"link":return c.decode(e);case"linked":return h.decode(e);case"unlink":return y.decode(e);case"unlinked":return b.decode(e);case"get":return v.decode(e);case"put":return m.decode(e)}}function i(){}function s(){i.call(this)}function o(){i.call(this)}function p(){i.call(this)}function a(e,t,n,r,i){p.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"via",{enumerable:!0,value:t||w.absent}),Object.defineProperty(this,"node",{enumerable:!0,value:n}),Object.defineProperty(this,"lane",{enumerable:!0,value:r}),Object.defineProperty(this,"body",{enumerable:!0,value:i||w.empty()})}function u(e,t,n,r,i){p.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"via",{enumerable:!0,value:t||w.absent}),Object.defineProperty(this,"node",{enumerable:!0,value:n}),Object.defineProperty(this,"lane",{enumerable:!0,value:r}),Object.defineProperty(this,"body",{enumerable:!0,value:i||w.empty()})}function f(){p.call(this)}function d(e,t,n,r,i){f.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"via",{enumerable:!0,value:t||w.absent}),Object.defineProperty(this,"node",{enumerable:!0,value:n}),Object.defineProperty(this,"lane",{enumerable:!0,value:r}),Object.defineProperty(this,"body",{enumerable:!0,value:i||w.empty()})}function l(e,t,n,r,i){f.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"via",{enumerable:!0,value:t||w.absent}),Object.defineProperty(this,"node",{enumerable:!0,value:n}),Object.defineProperty(this,"lane",{enumerable:!0,value:r}),Object.defineProperty(this,"body",{enumerable:!0,value:i||w.empty()})}function c(e,t,n){s.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"node",{enumerable:!0,value:t}),Object.defineProperty(this,"lane",{enumerable:!0,value:n})}function h(e,t,n){o.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"node",{enumerable:!0,value:t}),Object.defineProperty(this,"lane",{enumerable:!0,value:n})}function y(e,t,n){s.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"node",{enumerable:!0,value:t||w.absent}),Object.defineProperty(this,"lane",{enumerable:!0,value:n||w.absent})}function b(e,t,n){o.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"node",{enumerable:!0,value:t}),Object.defineProperty(this,"lane",{enumerable:!0,value:n})}function v(e,t){s.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"node",{enumerable:!0,value:t})}function m(e,t,n){s.call(this),Object.defineProperty(this,"channel",{enumerable:!0,value:e||w.extant}),Object.defineProperty(this,"node",{enumerable:!0,value:t}),Object.defineProperty(this,"body",{enumerable:!0,value:n||w.empty()})}var w=e("recon-js");Object.defineProperty(i.prototype,"isRequest",{value:!1}),Object.defineProperty(i.prototype,"isResponse",{value:!1}),Object.defineProperty(i.prototype,"isMessage",{value:!1}),Object.defineProperty(i.prototype,"isEventMessage",{value:!1}),Object.defineProperty(i.prototype,"isCommandMessage",{value:!1}),Object.defineProperty(i.prototype,"isSendMessage",{value:!1}),Object.defineProperty(i.prototype,"isSendEventMessage",{value:!1}),Object.defineProperty(i.prototype,"isSendCommandMessage",{value:!1}),Object.defineProperty(i.prototype,"isLinkRequest",{value:!1}),Object.defineProperty(i.prototype,"isLinkedResponse",{value:!1}),Object.defineProperty(i.prototype,"isUnlinkRequest",{value:!1}),Object.defineProperty(i.prototype,"isUnlinkedResponse",{value:!1}),Object.defineProperty(i.prototype,"isGetRequest",{value:!1}),Object.defineProperty(i.prototype,"isPutRequest",{value:!1}),s.prototype=Object.create(i.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,"isRequest",{value:!0}),o.prototype=Object.create(i.prototype),o.prototype.constructor=o,Object.defineProperty(s.prototype,"isResponse",{value:!0}),p.prototype=Object.create(i.prototype),p.prototype.constructor=p,Object.defineProperty(s.prototype,"isMessage",{value:!0}),a.prototype=Object.create(p.prototype),a.prototype.constructor=a,Object.defineProperty(a.prototype,"isEventMessage",{value:!0}),a.prototype.encode=function(){var e=w.builder();return e.attr("event",this.channel),this.via.isAbsent||e.attr("via",this.via),e.attr("node",this.node),e.attr("lane",this.lane),e.appendRecord(this.body),e.state()},a.decode=function(e){var t=e.iterator(),n=w.extant,r=w.absent,i=w.absent,s=w.absent;e:for(;!t.isEmpty();){var o=t.head();switch(o.key){case"event":n=o.value;break;case"via":r=o.value;break;case"node":i=o.value;break;case"lane":s=o.value;break;default:break e}t.step()}var p=t.toRecord();return new a(n,r,i,s,p)},u.prototype=Object.create(p.prototype),u.prototype.constructor=u,Object.defineProperty(u.prototype,"isCommandMessage",{value:!0}),u.prototype.encode=function(){var e=w.builder();return e.attr("command",this.channel),this.via.isAbsent||e.attr("via",this.via),e.attr("node",this.node),e.attr("lane",this.lane),e.appendRecord(this.body),e.state()},u.decode=function(e){var t=e.iterator(),n=w.extant,r=w.absent,i=w.absent,s=w.absent;e:for(;!t.isEmpty();){var o=t.head();switch(o.key){case"command":n=o.value;break;case"via":r=o.value;break;case"node":i=o.value;break;case"lane":s=o.value;break;default:break e}t.step()}var p=t.toRecord();return new u(n,r,i,s,p)},f.prototype=Object.create(p.prototype),f.prototype.constructor=f,Object.defineProperty(f.prototype,"isSendMessage",{value:!0}),f.decode=function(e){switch(e(1).key){case"event":return d.decode(e);case"command":return l.decode(e)}},d.prototype=Object.create(f.prototype),d.prototype.constructor=d,Object.defineProperty(d.prototype,"isSendEventMessage",{value:!0}),d.prototype.encode=function(){var e=w.builder();return e.attr("send"),e.attr("event",this.channel),this.via.isAbsent||e.attr("via",this.via),e.attr("node",this.node),e.attr("lane",this.lane),e.appendRecord(this.body),e.state()},d.decode=function(e){var t=e.iterator(),n=w.extant,r=w.absent,i=w.absent,s=w.absent;e:for(;!t.isEmpty();){var o=t.head();switch(o.key){case"send":break;case"event":n=o.value;break;case"via":r=o.value;break;case"node":i=o.value;break;case"lane":s=o.value;break;default:break e}t.step()}var p=t.toRecord();return new d(n,r,i,s,p)},l.prototype=Object.create(f.prototype),l.prototype.constructor=l,Object.defineProperty(l.prototype,"isSendCommandMessage",{value:!0}),l.prototype.encode=function(){var e=w.builder();return e.attr("send"),e.attr("command",this.channel),this.via.isAbsent||e.attr("via",this.via),e.attr("node",this.node),e.attr("lane",this.lane),e.appendRecord(this.body),e.state()},l.decode=function(e){var t=e.iterator(),n=w.extant,r=w.absent,i=w.absent,s=w.absent;e:for(;!t.isEmpty();){var o=t.head();switch(o.key){case"send":break;case"command":n=o.value;break;case"via":r=o.value;break;case"node":i=o.value;break;case"lane":s=o.value;break;default:break e}t.step()}var p=t.toRecord();return new l(n,r,i,s,p)},c.prototype=Object.create(s.prototype),c.prototype.constructor=c,Object.defineProperty(c.prototype,"isLinkRequest",{value:!0}),c.prototype.encode=function(){return w(w.attr("link",this.channel),w.attr("node",this.node),w.attr("lane",this.lane))},c.decode=function(e){for(var t=e.iterator(),n=w.extant,r=w.absent,i=w.absent;!t.isEmpty();){var s=t.next();switch(s.key){case"link":n=s.value;break;case"node":r=s.value;break;case"lane":i=s.value}}return new c(n,r,i)},h.prototype=Object.create(o.prototype),h.prototype.constructor=h,Object.defineProperty(h.prototype,"isLinkedResponse",{value:!0}),h.prototype.encode=function(){return w(w.attr("linked",this.channel),w.attr("node",this.node),w.attr("lane",this.lane))},h.decode=function(e){for(var t=e.iterator(),n=w.extant,r=w.absent,i=w.absent;!t.isEmpty();){var s=t.next();switch(s.key){case"linked":n=s.value;break;case"node":r=s.value;break;case"lane":i=s.value}}return new h(n,r,i)},y.prototype=Object.create(s.prototype),y.prototype.constructor=y,Object.defineProperty(y.prototype,"isUnlinkRequest",{value:!0}),y.prototype.encode=function(){var e=w.builder();return e.attr("unlink",this.channel),this.node.isAbsent||e.attr("node",this.node),this.lane.isAbsent||e.attr("lane",this.lane),e.state()},y.decode=function(e){for(var t=e.iterator(),n=w.extant,r=w.absent,i=w.absent;!t.isEmpty();){var s=t.next();switch(s.key){case"unlink":n=s.value;break;case"node":r=s.value;break;case"lane":i=s.value}}return new y(n,r,i)},b.prototype=Object.create(o.prototype),b.prototype.constructor=b,Object.defineProperty(b.prototype,"isUnlinkedResponse",{value:!0}),b.prototype.encode=function(){return w(w.attr("unlinked",this.channel),w.attr("node",this.node),w.attr("lane",this.lane))},b.decode=function(e){for(var t=e.iterator(),n=w.extant,r=w.absent,i=w.absent;!t.isEmpty();){var s=t.next();switch(s.key){case"unlinked":n=s.value;break;case"node":r=s.value;break;case"lane":i=s.value}}return new b(n,r,i)},v.prototype=Object.create(s.prototype),v.prototype.constructor=v,Object.defineProperty(v.prototype,"isGetRequest",{value:!0}),v.prototype.encode=function(){return w(w.attr("get",this.channel),w.attr("node",this.node))},v.decode=function(e){for(var t=e.iterator(),n=w.extant,r=w.absent;!t.isEmpty();){var i=t.next();switch(i.key){case"get":n=i.value;break;case"node":r=i.value}}return new v(n,r)},m.prototype=Object.create(s.prototype),m.prototype.constructor=m,Object.defineProperty(m.prototype,"isPutRequest",{value:!0}),m.prototype.encode=function(){var e=w.builder();return e.attr("put",this.channel),e.attr("node",this.node),e.appendRecord(this.body),e.state()},m.decode=function(e){var t=e.iterator(),n=w.extant,r=w.absent;e:for(;!t.isEmpty();){var i=t.head();switch(i.key){case"put":n=i.value;break;case"node":r=i.value;break;default:break e}t.step()}var s=t.toRecord();return new m(n,r,s)},n.decode=r,n.Envelope=i,n.RequestEnvelope=s,n.ResponseEnvelope=o,n.MessageEnvelope=p,n.EventMessage=a,n.CommandMessage=u,n.SendMessage=f,n.SendEventMessage=d,n.SendCommandMessage=l,n.LinkRequest=c,n.LinkedResponse=h,n.UnlinkRequest=y,n.UnlinkedResponse=b,n.GetRequest=v,n.PutRequest=m},{"recon-js":2}],2:[function(e,t,n){"use strict";function r(){if(1===arguments.length){var e=arguments[0];if(null===e)return J;if("undefined"==typeof e)return K;if(e instanceof E||e instanceof O){var t=new j;return t.appendField(e),t.state()}return i(e)}return arguments.length>1?s(arguments):K}function i(e){return null===e?J:e instanceof m||e instanceof E||e instanceof O||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||e instanceof Uint8Array||e===J||e===K?e:Array.isArray(e)?s(e):"object"==typeof e?e.toRecon&&"function"==typeof e.toRecon?e.toRecon():o(e):K}function s(e){for(var t=new j,n=e.length,r=0;n>r;){var s=i(e[r]);s.isField?t.appendField(s):t.appendValue(s),r+=1}return t.state()}function o(e){var t,n,i,s=new j,o=e["@"];for(t in o)n=r(t),"string"==typeof n&&(i=r(o[t]),i.isAbsent||s.appendField(new E(n,i)));for(t in e)"@"!==t&&(n=r(t),n.isAbsent||(i=r(e[t]),i.isAbsent||s.appendField(new O(n,i))));return s.state()}function p(e){var t=new g(e),n=(new B).run(t);return n.state()}function a(){var e=new H;return e.writeBlock(r.apply(null,arguments)),e.state()}function u(e){return null===e||"undefined"==typeof e||e.isExtant?null:e.isAbsent?void 0:e instanceof m?e.isArray()?f(e):d(e):e}function f(e){for(var t=[],n=e.iterator();!n.isEmpty();){var r=u(n.head());t.push(r),n.step()}return t}function d(e){for(var t,n,r=e.iterator(),i={},s=null,o=0;!r.isEmpty();){var p=r.head();p.isField?(t=u(p.key),n=u(p.value),p.isAttr?(null===s&&(s={}),s[t]=n):i[t]=n):(n=u(p),i[o]=n),r.step(),o+=1}return null!==s&&(i["@"]=s),i}function l(e){if("undefined"==typeof e)return new Uint8Array(0);for(var t=new A,n=new g(e);!n.isEmpty();)t.appendBase64Char(n.head()),n.step();return t.state()}function c(e,t){return"undefined"==typeof t&&(t=J),new E(r(e),r(t))}function h(e,t){return"undefined"==typeof t&&(t=J),new O(r(e),r(t))}function y(){return new m([],{})}function b(){return new j}function v(e,t){if(e===t)return!0;if(e instanceof m&&t instanceof m)return e.equals(t);if(e.isField&&t.isField)return e.equals(t);if(e instanceof Uint8Array&&t instanceof Uint8Array&&e.length===t.length){for(var n=0,r=e.length;r>n&&e[n]===t[n];)n+=1;if(n===r)return!0}return!1}function m(e,t){if("undefined"==typeof t){t={};for(var n=0,r=e.length;r>n;){var i=e[n];i.isField&&(t[i.key]=i.value),n+=1}}var s=function(n){var r=t[n];return"undefined"==typeof r&&"number"==typeof n&&(r=e[n]),r};return s.__proto__=m.prototype,Object.defineProperty(s,"items",{value:e}),Object.defineProperty(s,"index",{value:t}),s}function w(){}function E(e,t){w.call(this),Object.defineProperty(this,"key",{enumerable:!0,value:e}),"undefined"==typeof t&&(t=J),Object.defineProperty(this,"value",{enumerable:!0,value:t})}function O(e,t){w.call(this),Object.defineProperty(this,"key",{enumerable:!0,value:e}),"undefined"==typeof t&&(t=J),Object.defineProperty(this,"value",{enumerable:!0,value:t})}function D(e,t){Object.defineProperty(this,"items",{value:e}),Object.defineProperty(this,"index",{value:t||0,writable:!0})}function j(){Object.defineProperty(this,"items",{value:[]}),Object.defineProperty(this,"index",{value:{}})}function x(){Object.defineProperty(this,"items",{value:null,writable:!0}),Object.defineProperty(this,"index",{value:null,writable:!0}),Object.defineProperty(this,"value",{value:null,writable:!0})}function g(e,t){Object.defineProperty(this,"string",{value:e||""}),Object.defineProperty(this,"index",{value:t||0,writable:!0})}function k(){}function P(){Object.defineProperty(this,"string",{value:"",writable:!0})}function A(){Object.defineProperty(this,"buffer",{value:null,writable:!0}),Object.defineProperty(this,"offset",{value:0,writable:!0}),Object.defineProperty(this,"aliased",{value:!0,writable:!0}),Object.defineProperty(this,"p",{value:0,writable:!0}),Object.defineProperty(this,"q",{value:0,writable:!0}),Object.defineProperty(this,"r",{value:0,writable:!0}),Object.defineProperty(this,"s",{value:0,writable:!0})}function F(e){return 32===e||9===e}function R(e){return 10===e||13===e}function C(e){return F(e)||R(e)}function q(e){return e>=65&&90>=e||95===e||e>=97&&122>=e||e>=192&&214>=e||e>=216&&246>=e||e>=248&&767>=e||e>=880&&893>=e||e>=895&&8191>=e||e>=8204&&8205>=e||e>=8304&&8591>=e||e>=11264&&12271>=e||e>=12289&&55295>=e||e>=63744&&64975>=e||e>=65008&&65533>=e||e>=65536&&983039>=e}function S(e){return 45===e||e>=48&&57>=e||e>=65&&90>=e||95===e||e>=97&&122>=e||183===e||e>=192&&214>=e||e>=216&&246>=e||e>=248&&893>=e||e>=895&&8191>=e||e>=8204&&8205>=e||e>=8255&&8256>=e||e>=8304&&8591>=e||e>=11264&&12271>=e||e>=12289&&55295>=e||e>=63744&&64975>=e||e>=65008&&65533>=e||e>=65536&&983039>=e}function M(e){return e>=48&&57>=e||e>=65&&90>=e||e>=97&&122>=e||43===e||45===e||47===e||95===e}function B(e){k.call(this),this.value=e||new V}function V(e,t,n,r){k.call(this),this.builder=e||null,this.key=t||null,this.value=n||null,this.s=r||1}function U(e,t,n){k.call(this),this.ident=e||new z,this.value=t||new V,this.s=n||1}function I(e,t,n,r){k.call(this),this.builder=e||null,this.field=t||null,this.value=n||null,this.s=r||1}function N(e,t,n,r){k.call(this),this.builder=e||null,this.field=t||null,this.value=n||null,this.s=r||1}function L(e,t,n,r){k.call(this),this.builder=e||null,this.key=t||null,this.value=n||null,this.s=r||1}function _(e,t,n,r){k.call(this),this.builder=e||null,this.text=t||null,this.value=n||null,this.s=r||1}function T(e,t){k.call(this),this.text=e||null,this.s=t||1}function G(e,t){k.call(this),this.data=e||null,this.s=t||1}function Q(e,t){k.call(this),this.builder=e||null,this.s=t||1}function z(e,t){k.call(this),this.builder=e||null,this.s=t||1}function H(e){Object.defineProperty(this,"builder",{value:e||new P})}m.prototype=Object.create(Function.prototype),m.prototype.constructor=m,Object.defineProperty(m.prototype,"size",{enumerable:!0,get:function(){return this.items.length}}),m.prototype.isEmpty=function(){return 0===this.items.length},m.prototype.isArray=function(){return this.items.length>=0&&0===Object.getOwnPropertyNames(this.index).length},m.prototype.isMarkup=function(){function e(e){for(var t=new g(e);!t.isEmpty()&&F(t.head());)t.step();return t.isEmpty()}for(var t=this.iterator(),n=!1,r=!1,i=0;!t.isEmpty();){var s=t.head();if("string"!=typeof s){if(n)return!1;n=!0,r=!0}else n&&!e(s)?(n=!1,i+=1):0===i&&(i=1);t.step()}return r&&i>=2},m.prototype.hasAttrs=function(){return this.items.length>0&&(this.items[0].isAttr||this.items[this.items.length-1].isAttr)},m.prototype.hasPrefixAttrs=function(){return this.items.length>0&&this.items[0].isAttr},m.prototype.hasPostfixAttrs=function(){return this.items.length>0&&this.items[this.items.length-1].isAttr},m.prototype.contains=function(e){return"undefined"!=typeof this(e)},m.prototype.head=function(){return this.items.length>0?this.items[0]:K},m.prototype.tail=function(){return new m(this.items.slice(1))},m.prototype.body=function(){return new m(this.items.slice(0,-1))},m.prototype.foot=function(){return this.items.length>0?this.items[this.items.length-1]:K},m.prototype.target=function(){for(var e=this.iterator();!e.isEmpty();){var t=e.next();if(!t.isField)return t}return K},m.prototype.concat=function(){var e=new j;e.appendRecord(this);var t=r.apply(null,arguments);return t instanceof m?e.appendRecord(t):e.appendValue(t),e.state()},m.prototype.iterator=function(){return new D(this.items)},m.prototype.forEach=function(e){for(var t=this.iterator();!t.isEmpty();)e(t.next())},m.prototype.equals=function(e){for(var t=this.iterator(),n=e.iterator();!t.isEmpty()&&!n.isEmpty();)if(!v(t.next(),n.next()))return!1;return t.isEmpty()&&n.isEmpty()},m.prototype.toString=function(){var e=new H;return e.writeRecord(this),e.state()},Object.defineProperty(w.prototype,"isField",{enumerable:!0,value:!0}),Object.defineProperty(w.prototype,"isAttr",{enumerable:!0,value:!1}),Object.defineProperty(w.prototype,"isSlot",{enumerable:!0,value:!1}),E.prototype=Object.create(w.prototype),E.prototype.constructor=E,Object.defineProperty(E.prototype,"isAttr",{enumerable:!0,value:!0}),E.prototype.equals=function(e){return e.isAttr&&v(this.key,e.key)&&v(this.value,e.value)},E.prototype.toString=function(){var e=new H;return e.writeAttr(this),e.state()},O.prototype=Object.create(w.prototype),O.prototype.constructor=O,Object.defineProperty(O.prototype,"isSlot",{enumerable:!0,value:!0}),O.prototype.equals=function(e){return e.isSlot&&v(this.key,e.key)&&v(this.value,e.value)},O.prototype.toString=function(){var e=new H;return e.writeItem(this),e.state()};var J={};Object.defineProperty(J,"isExtant",{enumerable:!0,value:!0});var K={};Object.defineProperty(K,"isAbsent",{enumerable:!0,value:!0}),D.prototype.isEmpty=function(){return this.index>=this.items.length},D.prototype.head=function(){if(this.index>=this.items.length)throw"head of empty iterator";return this.items[this.index]},D.prototype.step=function(){if(this.index>=this.items.length)throw"empty iterator step";this.index+=1},D.prototype.next=function(){if(this.index>=this.items.length)return null;var e=this.items[this.index];return this.index+=1,e},D.prototype.dup=function(){return new D(this.items,this.index)},D.prototype.toRecord=function(){return new m(this.items.slice(this.index))},D.prototype.isAllAttrs=function(){for(var e=this.dup();!e.isEmpty();)if(!e.next().isAttr)return!1;return!0},j.prototype.appendField=function(e){this.items.push(e),this.index[e.key]=e.value},j.prototype.appendValue=function(e){this.items.push(e)},j.prototype.appendRecord=function(e){for(var t=e.iterator();!t.isEmpty();){var n=t.next();n.isField?this.appendField(n):this.appendValue(n)}},j.prototype.attr=function(e,t){return this.appendField(c(e,t)),this},j.prototype.slot=function(e,t){return this.appendField(h(e,t)),this},j.prototype.item=function(e){return this.appendValue(i(e)),this},j.prototype.state=function(){return new m(this.items,this.index)},x.prototype.appendField=function(e){null===this.items&&(this.items=[],this.index={},null!==this.value&&(this.items.push(this.value),this.value=null)),this.items.push(e),this.index[e.key]=e.value},x.prototype.appendValue=function(e){null!==this.items?this.items.push(e):null===this.value?this.value=e:(this.items=[],this.index={},this.items.push(this.value),this.value=null,this.items.push(e))},x.prototype.state=function(){return null!==this.value?this.value:null!==this.items?new m(this.items,this.index):K},g.prototype.isDone=function(){return!1},g.prototype.isEmpty=function(){return this.index>=this.string.length},g.prototype.head=function(){var e=this.string.charCodeAt(this.index);if(55295>=e||e>=57344)return e;if(56319>=e&&this.index+1<this.string.length){var t=this.string.charCodeAt(this.index+1);return t>=56320&&57343>=t?((1023&e)<<10|1023&t)+65536:65533}return 65533},g.prototype.step=function(){var e=this.string.charCodeAt(this.index);if(55295>=e||e>=57344)this.index+=1;else if(56319>=e&&this.index+1<this.string.length){var t=this.string.charCodeAt(this.index+1);this.index+=t>=56320&&57343>=t?2:1}else this.index+=1},g.Done={isDone:function(){return!0},isEmpty:function(){return!0},head:function(){throw"head of empty iterator"},step:function(){throw"empty iterator step"}},g.Done.prototype=Object.create(g.prototype),k.prototype.isCont=function(){return!0},k.prototype.isDone=function(){return!1},k.prototype.isError=function(){return!1},k.prototype.feed=function(){return this},k.prototype.run=function(e){for(var t=this;!e.isEmpty()&&t.isCont();)t=t.feed(e);return e.isEmpty()&&!e.isDone()&&t.isCont()&&(t=t.feed(g.Done)),t},k.Done=function(e){k.call(this),this.value=e},k.Done.prototype=Object.create(k.prototype),k.Done.prototype.constructor=k.Done,k.Done.prototype.isCont=function(){return!1},k.Done.prototype.isDone=function(){return!0},k.Done.prototype.feed=function(){return this},k.Done.prototype.state=function(){return this.value},k.Error=function(e){k.call(this),this.error=e},k.Error.prototype=Object.create(k.prototype),k.Error.prototype.constructor=k.Error,k.Error.prototype.isCont=function(){return!1},k.Error.prototype.isError=function(){return!0},k.Error.prototype.feed=function(){return this},k.Error.prototype.state=function(){throw this.error},k.unexpectedEOF=new k.Error("unexpected end of input"),P.prototype.append=function(e){if(e>=0&&55295>=e||e>=57344&&65535>=e)this.string+=String.fromCharCode(e);else if(e>=65536&&1114111>=e){var t=e-65536;this.string+=String.fromCharCode(55296|t>>>10,56320|1023&t)}else this.string+=String.fromCharCode(65533)},P.prototype.appendString=function(e){for(var t=new g(e);!t.isEmpty();)this.append(t.head()),t.step()},P.prototype.state=function(){return this.string},A.prototype.prepare=function(e){function t(e,t){var n=Math.max(e,t)-1;return n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n+1}if(this.aliased||e>this.buffer.length){var n=new Uint8Array(t(256,e));this.buffer&&n.set(this.buffer),this.buffer=n,this.aliased=!1}},A.prototype.appendByte=function(e){this.prepare(this.offset+1),this.buffer[this.offset]=e,this.offset+=1},A.prototype.decodeBase64Digit=function(e){return e>=65&&90>=e?e-65:e>=97&&122>=e?e-71:e>=48&&57>=e?e+4:43===e||45===e?62:47===e||95===e?63:void 0},A.prototype.decodeBase64Quantum=function(){var e=this.decodeBase64Digit(this.p),t=this.decodeBase64Digit(this.q);if(61!==this.r){var n=this.decodeBase64Digit(this.r);if(61!==this.s){var r=this.decodeBase64Digit(this.s);this.appendByte(e<<2|t>>>4),this.appendByte(t<<4|n>>>2),this.appendByte(n<<6|r)}else this.appendByte(e<<2|t>>>4),this.appendByte(t<<4|n>>>2)}else{if(61!==this.s)throw"incomplete base64 quantum";this.appendByte(e<<2|t>>>4)}},A.prototype.appendBase64Char=function(e){0===this.p?this.p=e:0===this.q?this.q=e:0===this.r?this.r=e:(this.s=e,this.decodeBase64Quantum(),this.s=0,this.r=0,this.q=0,this.p=0)},A.prototype.state=function(){if(this.buffer){if(this.buffer.length!==this.offset){var e=new Uint8Array(this.offset);e.set(this.buffer.subarray(0,this.offset)),this.buffer=e}}else this.buffer=new Uint8Array(0);return this.aliased=!0,this.buffer},B.prototype=Object.create(k.prototype),B.prototype.constructor=B,B.prototype.feed=function(e){for(var t=this.value;(!e.isEmpty()||e.isDone())&&t.isCont();)t=t.feed(e);if(t.isError())return t;if(t.isDone()){if(!e.isEmpty())return new k.Error({found:e.head()});if(e.isDone())return t}return new B(t)},V.prototype=Object.create(k.prototype),V.prototype.constructor=V,V.prototype.feed=function(e){for(var t=0,n=this.s,r=this.value,i=this.key,s=this.builder||new x;!e.isEmpty()||e.isDone();){if(1===n){for(;!e.isEmpty()&&(t=e.head(),C(t));)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else n=2}if(2===n){for(i=i||new I;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())n=3;else if(i.isError())return i}if(3===n){for(;!e.isEmpty()&&(t=e.head(),F(t));)e.step();if(e.isEmpty()){if(e.isDone())return s.appendValue(i.state()),new k.Done(s.state())}else 58===t?(e.step(),n=4):(s.appendValue(i.state()),i=null,n=6)}if(4===n){for(;!e.isEmpty()&&F(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return s.appendField(new O(i.state())),new k.Done(s.state())}else n=5}if(5===n){for(r=r||new I;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())s.appendField(new O(i.state(),r.state())),i=null,r=null,n=6;else if(r.isError())return r}if(6===n){for(;!e.isEmpty()&&(t=e.head(),F(t));)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else{if(44!==t&&59!==t&&!R(t))return new k.Done(s.state());e.step(),n=1}}}return new V(s,i,r,n)},U.prototype=Object.create(k.prototype),U.prototype.constructor=U,U.prototype.feed=function(e){var t=0,n=this.s,r=this.value,i=this.ident;if(1===n)if(e.isEmpty()||(t=e.head(),64!==t)){if(!e.isEmpty())return new k.Error({expected:"'@'",found:t});if(e.isDone())return k.unexpectedEOF}else e.step(),n=2;if(2===n)if(i=i.feed(e),i.isDone())n=3;else if(i.isError())return i;if(3===n)if(e.isEmpty()||40!==e.head()){if(!e.isEmpty()||e.isDone())return new k.Done(new E(i.state()))}else e.step(),n=4;if(4===n){for(;!e.isEmpty()&&(t=e.head(),C(t));)e.step();if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(41===t)return e.step(),new k.Done(new E(i.state()));n=5}}if(5===n){for(;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())n=6;else if(r.isError())return r}if(6===n){for(;!e.isEmpty()&&(t=e.head(),C(t));)e.step();if(!e.isEmpty())return 41===t?(e.step(),new k.Done(new E(i.state(),r.state()))):new k.Error({expected:"')'",found:t});if(e.isDone())return k.unexpectedEOF}return new U(i,r,n)},I.prototype=Object.create(k.prototype),I.prototype.constructor=I,I.prototype.feed=function(e){for(var t=0,n=this.s,r=this.value,i=this.field,s=this.builder;!e.isEmpty()||e.isDone();){if(1===n)if(e.isEmpty()){if(e.isDone())return new k.Done(s?s.state():K)}else if(t=e.head(),64===t)i=new U,n=2;else if(123===t)s=s||new j,r=new L(s),n=5;else if(91===t)s=s||new j,r=new _(s),n=5;else if(34===t)r=new T,n=4;else if(37===t)r=new G,n=4;else if(45===t||t>=48&&57>=t)r=new Q,n=4;else{if(!q(t))return new k.Done(s?s.state():K);r=new z,n=4}if(2===n){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())s=s||new x,s.appendField(i.state()),i=null,n=3;else if(i.isError())return i}if(3===n){for(;!e.isEmpty()&&F(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else n=1}if(4===n){for(;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())s=s||new x,s.appendValue(r.state()),r=null,n=6;else if(r.isError())return r}if(5===n){for(;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())r=null,n=6;else if(r.isError())return r}if(6===n){for(;!e.isEmpty()&&F(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else{if(64!==e.head())return new k.Done(s.state());i=new U,n=7}}if(7===n){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())s=s||new x,s.appendField(i.state()),i=null,n=6;else if(i.isError())return i}}return new I(s,i,r,n)},N.prototype=Object.create(k.prototype),N.prototype.constructor=N,N.prototype.feed=function(e){for(var t=0,n=this.s,r=this.value,i=this.field,s=this.builder;!e.isEmpty()||e.isDone();){if(1===n)if(e.isEmpty()){if(e.isDone())return new k.Done(s?s.state():K)}else if(t=e.head(),64===t)i=new U,n=2;else if(123===t)s?(r=new L(s),n=5):(r=new L,n=4);else{if(91!==t)return new k.Done(s?s.state():K);s?(r=new _(s),n=5):(r=new _,n=4)}if(2===n){for(;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())s=s||new x,s.appendField(i.state()),i=null,n=3;else if(i.isError())return i}if(3===n){for(;!e.isEmpty()&&F(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return new k.Done(s.state())}else n=1}if(4===n){for(;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())return s=s||new x,s.appendValue(r.state()),new k.Done(s.state());if(r.isError())return r}if(5===n){for(;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())return new k.Done(s.state());if(r.isError())return r}}return new N(s,i,r,n)},L.prototype=Object.create(k.prototype),L.prototype.constructor=L,L.prototype.feed=function(e){var t=0,n=this.s,r=this.value,i=this.key,s=this.builder||new j;if(1===n)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(t=e.head(),123!==t)return new k.Error({expected:"'{'",found:t});e.step(),n=2}for(;!e.isEmpty()||e.isDone();){if(2===n){for(;!e.isEmpty()&&(t=e.head(),C(t));)e.step();if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(125===t)return e.step(),new k.Done(s.state());n=3}}if(3===n){for(i=i||new I;(!e.isEmpty()||e.isDone())&&i.isCont();)i=i.feed(e);if(i.isDone())n=4;else if(i.isError())return i}if(4===n){for(;!e.isEmpty()&&(t=e.head(),F(t));)e.step();if(e.isEmpty()){if(e.isDone())return s.appendValue(i.state()),new k.Done(s.state())}else 58===t?(e.step(),n=5):(s.appendValue(i.state()),i=null,n=7)}if(5===n){for(;!e.isEmpty()&&F(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return s.appendField(new O(i.state())),new k.Done(s.state())}else n=6}if(6===n){for(r=r||new I;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())s.appendField(new O(i.state(),r.state())),i=null,r=null,n=7;else if(r.isError())return r}if(7===n){for(;!e.isEmpty()&&(t=e.head(),F(t));)e.step();if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(44!==t&&59!==t&&!R(t))return 125===t?(e.step(),new k.Done(s.state())):new k.Error({expected:"'}', ';', ',', or newline",found:t});e.step(),n=2}}}return new L(s,i,r,n)},_.prototype=Object.create(k.prototype),_.prototype.constructor=_,_.prototype.feed=function(e){var t=0,n=this.s,r=this.value,i=this.text,s=this.builder;if(1===n)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(t=e.head(),91!==t)return new k.Error({expected:"'['",found:t});e.step(),n=2}for(;!e.isEmpty()||e.isDone();){if(2===n){for(;!e.isEmpty()&&(t=e.head(),64!==t&&91!==t&&92!==t&&93!==t&&123!==t&&125!==t);)e.step(),i=i||new P,i.append(t);
if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(93===t)return e.step(),s=s||new j,i&&s.appendValue(i.state()),new k.Done(s.state());64===t?(s=s||new j,i&&(s.appendValue(i.state()),i=null),r=new N,n=3):123===t?(s=s||new j,i&&(s.appendValue(i.state()),i=null),r=new L(s),n=4):91===t?(s=s||new j,i&&(s.appendValue(i.state()),i=null),r=new _(s),n=4):92===t?(e.step(),n=5):new k.Error({found:t})}}if(3===n){for(;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())s.appendValue(r.state()),r=null,n=2;else if(r.isError())return r}if(4===n){for(;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())r=null,n=2;else if(r.isError())return r}if(5===n)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else if(t=e.head(),i=i||new P,34===t||47===t||64===t||91===t||92===t||93===t||123===t||125===t)e.step(),i.append(t),n=2;else if(98===t)e.step(),i.append(8),n=2;else if(102===t)e.step(),i.append(12),n=2;else if(110===t)e.step(),i.append(10),n=2;else if(114===t)e.step(),i.append(13),n=2;else{if(116!==t)return new k.Error({expected:"escape character",found:t});e.step(),i.append(9),n=2}}return new _(s,i,r,n)},T.prototype=Object.create(k.prototype),T.prototype.constructor=T,T.prototype.feed=function(e){var t=0,n=this.s,r=this.text;if(1===n)if(e.isEmpty()||(t=e.head(),34!==t)){if(!e.isEmpty())return new k.Error({expected:"'\"'",found:t});if(e.isDone())return k.unexpectedEOF}else e.step(),n=2;for(;!e.isEmpty()||e.isDone();){if(2===n){for(r=r||new P;!e.isEmpty()&&(t=e.head(),34!==t&&92!==t);)e.step(),r.append(t);if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(34===t)return e.step(),new k.Done(r.state());92===t&&(e.step(),n=3)}}if(3===n)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else if(t=e.head(),34===t||47===t||64===t||91===t||92===t||93===t||123===t||125===t)e.step(),r.append(t),n=2;else if(98===t)e.step(),r.append(8),n=2;else if(102===t)e.step(),r.append(12),n=2;else if(110===t)e.step(),r.append(10),n=2;else if(114===t)e.step(),r.append(13),n=2;else{if(116!==t)return new k.Error({expected:"escape character",found:t});e.step(),r.append(9),n=2}}return new T(r,n)},G.prototype=Object.create(k.prototype),G.prototype.constructor=G,G.prototype.feed=function(e){var t=0,n=this.s,r=this.data||new A;if(1===n)if(e.isEmpty()||(t=e.head(),37!==t)){if(!e.isEmpty())return new k.Error({expected:"'%'",found:t});if(e.isDone())return k.unexpectedEOF}else e.step(),n=2;for(;!e.isEmpty()||e.isDone();){if(2===n)if(!e.isEmpty()&&(t=e.head(),M(t)))e.step(),r.appendBase64Char(t),n=3;else if(!e.isEmpty()||e.isDone())return new k.Done(r.state());if(3===n)if(!e.isEmpty()&&(t=e.head(),M(t)))e.step(),r.appendBase64Char(t),n=4;else{if(!e.isEmpty())return new k.Error({expected:"base64 digit",found:t});if(e.isDone())return k.unexpectedEOF}if(4===n)if(!e.isEmpty()&&(t=e.head(),M(t)||61===t))e.step(),r.appendBase64Char(t),n=61!==t?5:6;else{if(!e.isEmpty())return new k.Error({expected:"base64 digit",found:t});if(e.isDone())return k.unexpectedEOF}if(5===n)if(!e.isEmpty()&&(t=e.head(),M(t)||61===t)){if(e.step(),r.appendBase64Char(t),61===t)return new k.Done(r.state());n=2}else{if(!e.isEmpty())return new k.Error({expected:"base64 digit",found:t});if(e.isDone())return k.unexpectedEOF}else if(6===n){if(!e.isEmpty()&&(t=e.head(),61===t))return e.step(),r.appendBase64Char(t),new k.Done(r.state());if(!e.isEmpty())return new k.Error({expected:"'='",found:t});if(e.isDone())return k.unexpectedEOF}}return new G(r,n)},Q.prototype=Object.create(k.prototype),Q.prototype.constructor=Q,Q.prototype.feed=function(e){var t=0,n=this.s,r=this.builder||new P;if(1===n)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else t=e.head(),45===t&&(e.step(),r.append(t)),n=2;if(2===n)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else if(t=e.head(),48===t)e.step(),r.append(t),n=4;else{if(!(t>=49&&57>=t))return new k.Error({expected:"digit",found:t});e.step(),r.append(t),n=3}if(3===n){for(;!e.isEmpty()&&(t=e.head(),t>=48&&57>=t);)e.step(),r.append(t);if(e.isEmpty()){if(e.isDone())return new k.Done(Number(r.state()))}else n=4}if(4===n)if(e.isEmpty()){if(e.isDone())return new k.Done(Number(r.state()))}else if(t=e.head(),46===t)e.step(),r.append(t),n=5;else{if(69!==t&&101!==t)return new k.Done(Number(r.state()));e.step(),r.append(t),n=8}if(5===n)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(t=e.head(),!(t>=48&&57>=t))return new k.Error({expected:"digit",found:t});e.step(),r.append(t),n=6}if(6===n){for(;!e.isEmpty()&&(t=e.head(),t>=48&&57>=t);)e.step(),r.append(t);if(e.isEmpty()){if(e.isDone())return new k.Done(Number(r.state()))}else n=7}if(7===n){if(t=e.head(),69!==t&&101!==t)return new k.Done(Number(r.state()));e.step(),r.append(t),n=8}if(8===n)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else t=e.head(),(43===t||45===t)&&(e.step(),r.append(t)),n=9;if(9===n)if(e.isEmpty()){if(e.isDone())return k.unexpectedEOF}else{if(t=e.head(),!(t>=48&&57>=t))return new k.Error({expected:"digit",found:t});e.step(),r.append(t),n=10}if(10===n){for(;!e.isEmpty()&&(t=e.head(),t>=48&&57>=t);)e.step(),r.append(t);if(!e.isEmpty()||e.isDone())return new k.Done(Number(r.state()))}return new Q(r,n)},z.prototype=Object.create(k.prototype),z.prototype.constructor=z,z.prototype.feed=function(e){var t=0,n=this.s,r=this.builder;if(1===n)if(!e.isEmpty()&&(t=e.head(),q(t)))r=r||new P,e.step(),r.append(t),n=2;else{if(!e.isEmpty())return new k.Error({expected:"identitifer",found:t});if(e.isDone())return k.unexpectedEOF}if(2===n){for(;!e.isEmpty()&&(t=e.head(),S(t));)e.step(),r.append(t);if(!e.isEmpty()||e.isDone()){var i=r.state();return"true"===i?i=!0:"false"===i&&(i=!1),new k.Done(i)}}return new z(r,n)},H.prototype.writeValue=function(e,t){e instanceof m?this.writeRecord(e,t):"string"==typeof e?this.writeText(e,t):"number"==typeof e?this.writeNumber(e):"boolean"==typeof e?this.writeBool(e):e instanceof Uint8Array&&this.writeData(e)},H.prototype.writeAttr=function(e){this.builder.append(64),this.writeIdent(e.key),e.value.isExtant||(this.builder.append(40),this.writeBlock(e.value),this.builder.append(41))},H.prototype.writeItem=function(e){e.isField?(this.writeValue(e.key),this.builder.append(58),e.value.isExtant||this.writeValue(e.value)):this.writeValue(e)},H.prototype.writeBlock=function(e){if(e instanceof m)if(e.isMarkup())this.writeMarkup(e);else if(e.hasAttrs())this.writeRecord(e);else{var t=e.iterator();if(!t.isEmpty())for(this.writeItem(t.next());!t.isEmpty();)this.builder.append(44),this.writeItem(t.next())}else this.writeValue(e)},H.prototype.writeRecord=function(e,t){if(e.isMarkup())this.writeMarkup(e);else{for(var n,r=e.iterator(),i=!1;!r.isEmpty()&&(n=r.head(),n.isAttr);)this.writeAttr(n),r.step(),i=!0;if(r.isEmpty())i||(this.builder.append(123),this.builder.append(125));else{if(r.step(),i&&r.isEmpty())t?n instanceof m||"string"==typeof n?this.writeValue(n,t):(this.builder.append(123),this.writeItem(n),this.builder.append(125)):n instanceof m||n.isSlot?(this.builder.append(123),this.writeItem(n),this.builder.append(125)):(this.builder.append(32),this.writeValue(n));else if(!r.isEmpty()&&r.isAllAttrs())n instanceof m||n.isSlot?(this.builder.append(123),this.writeItem(n),this.builder.append(125)):(i&&this.builder.append(32),this.writeValue(n));else{for(this.builder.append(123),this.writeItem(n);!r.isEmpty()&&(n=r.head(),!n.isAttr||!r.isAllAttrs);)this.builder.append(44),this.writeItem(n),r.step();this.builder.append(125)}for(;!r.isEmpty();)this.writeAttr(r.next())}}},H.prototype.writeMarkup=function(e){for(var t,n=e.iterator(),r=!1;!n.isEmpty()&&(t=n.head(),t.isAttr);)this.writeAttr(t),n.step(),r=!0;for(this.builder.append(91);!n.isEmpty();){if(t=n.head(),"string"==typeof t)for(var i=new g(t);!i.isEmpty();){var s=i.head();switch(s){case 64:case 91:case 92:case 93:case 123:case 125:this.builder.append(92),this.builder.append(s);break;default:this.builder.append(s)}i.step()}else t instanceof m?this.writeRecord(t,!0):(this.builder.append(123),this.writeItem(t),this.builder.append(125));n.step()}this.builder.append(93)},H.prototype.writeText=function(e,t){function n(){var t=new g(e);if(t.isEmpty()||!q(t.head()))return!1;for(t.step();!t.isEmpty()&&S(t.head());)t.step();return t.isEmpty()}t?this.writeTextMarkup(e):n()?this.writeIdent(e):this.writeString(e)},H.prototype.writeString=function(e){var t=new g(e);for(this.builder.append(34);!t.isEmpty();){var n=t.head();switch(n){case 34:case 92:this.builder.append(92),this.builder.append(n);break;case 8:this.builder.append(92),this.builder.append(98);break;case 12:this.builder.append(92),this.builder.append(102);break;case 10:this.builder.append(92),this.builder.append(110);break;case 13:this.builder.append(92),this.builder.append(114);break;case 9:this.builder.append(92),this.builder.append(116);break;default:this.builder.append(n)}t.step()}this.builder.append(34)},H.prototype.writeIdent=function(e){this.builder.appendString(e)},H.prototype.writeTextMarkup=function(e){var t=new g(e);for(this.builder.append(91);!t.isEmpty();){var n=t.head();switch(n){case 64:case 91:case 92:case 93:case 123:case 125:this.builder.append(92),this.builder.append(n);break;default:this.builder.append(n)}t.step()}this.builder.append(93)},H.prototype.writeNumber=function(e){this.builder.appendString(e.toString())},H.prototype.writeBool=function(e){this.builder.appendString(e.toString())},H.prototype.writeData=function(e){function t(e){return e>=0&&26>e?e+65:e>=26&&52>e?e+71:e>=52&&62>e?e-4:62===e?43:63===e?47:void 0}this.builder.append(37);for(var n,r,i,s=0,o=e.length;o>s+2;)n=e[s],r=e[s+1],i=e[s+2],this.builder.append(t(n>>>2)),this.builder.append(t(63&(n<<4|r>>>4))),this.builder.append(t(63&(r<<2|i>>>6))),this.builder.append(t(63&i)),s+=3;o>s+1?(n=e[s],r=e[s+1],this.builder.append(t(n>>>2)),this.builder.append(t(63&(n<<4|r>>>4))),this.builder.append(t(r<<2&63)),this.builder.append(61),s+=2):o>s&&(n=e[s],this.builder.append(t(n>>>2)),this.builder.append(t(n<<4&63)),this.builder.append(61),this.builder.append(61),s+=1)},H.prototype.state=function(){return this.builder.state()},t.exports=function(){return r.apply(null,arguments)},n=t.exports,n.parse=p,n.stringify=a,n.objectify=u,n.Record=m,n.Field=w,n.Attr=E,n.Slot=O,n.attr=c,n.slot=h,n.base64=l,n.extant=J,n.absent=K,n.empty=y,n.builder=b,n.compare=v},{}]},{},[1])(1)});
//# sourceMappingURL=swim-proto.min.js.map